{"ast":null,"code":"import _asyncToGenerator from \"/Users/constantin-bogdanbumbeneci/Desktop/Licenta/Diploma/Proiect/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { DOCUMENT } from \"@angular/common\";\nimport { Energy } from './Entity/energy';\nimport { ArcElement, BarController, BarElement, CategoryScale, Chart, Decimation, Filler, Legend, LinearScale, LineController, LineElement, PieController, PointElement, Title, Tooltip } from 'chart.js';\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\nimport ChartModule from 'chartjs-plugin-datalabels';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./Service/authentication.service\";\nimport * as i2 from \"./Service/plant.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"./Components/plants-group/plants-group.component\";\nimport * as i7 from \"./Components/plant-selected/plant-selected.component\";\n\nfunction AppComponent_li_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 28)(1, \"a\", 29);\n    i0.ɵɵelement(2, \"i\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ul\", 31)(4, \"li\")(5, \"a\", 32);\n    i0.ɵɵtext(6, \"Settings\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"li\")(8, \"a\", 32);\n    i0.ɵɵtext(9, \"Activity Log\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"li\");\n    i0.ɵɵelement(11, \"hr\", 33);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"li\")(13, \"a\", 34);\n    i0.ɵɵlistener(\"click\", function AppComponent_li_11_Template_a_click_13_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.logout();\n    });\n    i0.ɵɵtext(14, \"Logout\");\n    i0.ɵɵelementEnd()()()();\n  }\n}\n\nfunction AppComponent_li_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 35);\n    i0.ɵɵtext(2, \"Login\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction AppComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 36)(1, \"div\", 37);\n    i0.ɵɵtext(2, \"Core Menu\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"a\", 38);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_17_Template_a_click_3_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.goHome();\n    });\n    i0.ɵɵelementStart(4, \"div\", 39);\n    i0.ɵɵelement(5, \"i\", 40);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \" Home \");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction AppComponent_ng_template_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 41);\n    i0.ɵɵtext(1, \"Logged in as:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(2);\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.getLogedUsername(), \" \");\n  }\n}\n\nfunction AppComponent_ng_template_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 41);\n    i0.ɵɵtext(1, \"Please Log In\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(2, \" You are not authenticated \");\n  }\n}\n\nfunction AppComponent_li_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 42);\n    i0.ɵɵtext(1, \"Dashboard\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AppComponent_li_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 42);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Dashboard >> \", ctx_r6.getSelectedPlant().name, \"\");\n  }\n}\n\nfunction AppComponent_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 43)(1, \"div\", 44);\n    i0.ɵɵtext(2, \"Atention\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 45)(4, \"h5\", 46);\n    i0.ɵɵtext(5, \"You are not authenticated\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 47);\n    i0.ɵɵtext(7, \"This panel is designed to be used by authorised user.\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 48)(9, \"a\", 49);\n    i0.ɵɵtext(10, \"Take action\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \" - Please login \");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction AppComponent_div_30_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"app-plants-group\");\n    i0.ɵɵelementStart(2, \"div\")(3, \"h1\");\n    i0.ɵɵtext(4, \"Statistics\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"br\");\n    i0.ɵɵelementStart(6, \"div\", 50)(7, \"div\", 51)(8, \"div\", 52)(9, \"div\", 53);\n    i0.ɵɵelement(10, \"i\", 54);\n    i0.ɵɵtext(11, \" Daily production \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 55);\n    i0.ɵɵelement(13, \"canvas\", 56);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(14, \"div\", 51)(15, \"div\", 52)(16, \"div\", 53);\n    i0.ɵɵelement(17, \"i\", 54);\n    i0.ɵɵtext(18, \" Yearly production \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"div\", 55);\n    i0.ɵɵelement(20, \"canvas\", 57);\n    i0.ɵɵelementStart(21, \"div\", 58);\n    i0.ɵɵtext(22, \"Total production \");\n    i0.ɵɵelement(23, \"br\");\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd()()()()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(24);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r13.getYearlyEnergy().toPrecision(3) + \" GWh\", \"\");\n  }\n}\n\nfunction AppComponent_div_30_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"app-plant-selected\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AppComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, AppComponent_div_30_div_1_Template, 25, 1, \"div\", 11);\n    i0.ɵɵtemplate(2, AppComponent_div_30_div_2_Template, 2, 0, \"div\", 11);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.getSelectedPlant() == null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.getSelectedPlant() != null);\n  }\n}\n\nexport class AppComponent {\n  constructor(userService, plantService, router, randerer, datePipe, document) {\n    this.userService = userService;\n    this.plantService = plantService;\n    this.router = router;\n    this.randerer = randerer;\n    this.datePipe = datePipe;\n    this.document = document;\n    this.title = 'my-virtual-power-plant-ng';\n    this._toggled = false;\n    this._dailyEnergy = new Array();\n    this._yearlyEnergy = new Array();\n    this._contribution = new Array();\n    Chart.register(BarElement, BarController, CategoryScale, Decimation, Filler, Legend, Title, Tooltip, LinearScale, LineElement, LineController, PointElement, PieController, ArcElement);\n  }\n\n  ngAfterViewInit() {\n    return _asyncToGenerator(function* () {})();\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      (yield _this.plantService.getPlants()).forEach( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (next) {\n          _this._plants = next;\n\n          _this._plants.forEach(p => {\n            _this.plantService.getEnergies().push(new Energy());\n          });\n\n          for (let i = 0; i < _this.plantService.getEnergies().length; i++) {\n            (yield _this.plantService.fetchPlantDatasBetweenDates(_this._plants[i], '2022-01-01', '2022-12-31')).forEach(ps => {\n              _this.plantService.getEnergies()[i].status = ps;\n\n              _this.plantService.getEnergies()[i].status.forEach( //Every month Data\n              //Every month Data\n              s => {\n                _this.plantService.getEnergies()[i].thisYearEnergy[_this.datePipe.transform(s.dateTime, 'MM') - 1] += s.voltage * s.current * s.powerFactor;\n                _this.plantService.getEnergies()[i].thisYearTotalEnergy += s.voltage * s.current * s.powerFactor;\n              });\n\n              _this.plantService.getEnergies()[i].status.filter( //Today Data\n              //Today Data\n              s => _this.datePipe.transform(s.dateTime, 'yyyy-MM-dd') == _this.datePipe.transform(new Date(), 'yyyy-MM-dd')).forEach(s => {\n                _this.plantService.getEnergies()[i].todayCurrent.push(s.current);\n\n                _this.plantService.getEnergies()[i].todayVoltage.push(s.voltage);\n\n                _this.plantService.getEnergies()[i].todayPowerFactor.push(s.powerFactor);\n\n                _this.plantService.getEnergies()[i].todayHours.push(_this.datePipe.transform(s.dateTime, 'yyyy-MM-ddThh:mm:ss').substring(11));\n\n                _this.plantService.getEnergies()[i].todayPower.push(s.voltage * s.current * s.powerFactor);\n\n                _this.plantService.getEnergies()[i].todayEnergy += s.voltage * s.current * s.powerFactor;\n              });\n\n              for (let j = 0; j < 12; j++) {\n                if (j + 1 != _this.daysInMonth(j + 1, _this.datePipe.transform(new Date(), 'MM'))) {\n                  _this.plantService.getEnergies()[i].thisYearEnergy[j] *= _this.daysInMonth(j + 1, _this.datePipe.transform(new Date(), 'yyyy') - 1) / _this.daysInMonth(j + 1, _this.datePipe.transform(new Date(), 'yyyy'));\n                } else {\n                  _this.plantService.getEnergies()[i].thisYearEnergy[j] *= (_this.datePipe.transform(new Date(), 'dd') - 1) / _this.datePipe.transform(new Date(), 'dd');\n                }\n              }\n\n              _this.plantService.getEnergies()[i].todayEnergy *= (_this.plantService.getEnergies()[i].todayHours.length - 1) / _this.plantService.getEnergies()[i].todayHours.length;\n              _this.plantService.getEnergies()[i].plant = _this._plants[i];\n\n              _this._contribution.push(_this.plantService.getEnergies()[i].plant.name);\n\n              _this._dailyEnergy.push(_this.plantService.getEnergies()[i].todayEnergy);\n\n              _this._yearlyEnergy.push(_this.plantService.getEnergies()[i].thisYearTotalEnergy);\n            });\n          }\n\n          console.log(_this.plantService.getEnergies());\n          _this._dailyPie = new Chart(\"myDaily\", {\n            type: 'pie',\n            data: {\n              labels: _this._contribution,\n              datasets: [{\n                label: \"Energy Contribution\",\n                data: _this._dailyEnergy,\n                backgroundColor: ['rgb(255, 159, 64)', 'rgb(255, 205, 86)', 'rgb(0, 163, 51)', 'rgb(54, 162, 235)', 'rgb(153, 102, 255)', 'rgb(201, 203, 207)', 'rgb(0,0,255)']\n              }]\n            },\n            plugins: [ChartDataLabels, ChartModule],\n            options: {\n              plugins: {\n                title: {\n                  display: true,\n                  text: 'Daily contribution in kWh'\n                },\n                datalabels: {\n                  color: 'rgb(255,255,255)',\n                  font: {\n                    size: 13\n                  },\n                  formatter: function (value, context) {\n                    return value.toPrecision(7) + ' kWh';\n                  }\n                }\n              }\n            }\n          });\n          _this._yearlyPie = new Chart(\"myYearly\", {\n            type: 'doughnut',\n            plugins: [ChartDataLabels, ChartModule],\n            data: {\n              labels: _this._contribution,\n              datasets: [{\n                label: \"Energy Contribution\",\n                data: _this._yearlyEnergy,\n                backgroundColor: ['rgb(0,0,255)', 'rgb(255, 159, 64)', 'rgb(255, 205, 86)', 'rgb(153, 102, 255)', 'rgb(0, 163, 51)', 'rgb(201, 203, 207)', 'rgb(54, 162, 235)']\n              }]\n            },\n            options: {\n              plugins: {\n                title: {\n                  display: true,\n                  text: 'Yearly contribution in MWh'\n                },\n                datalabels: {\n                  color: 'rgb(255,255,255)',\n                  font: {\n                    size: 13\n                  },\n                  formatter: function (value, context) {\n                    return value.toPrecision(6) + ' MWh';\n                  }\n                }\n              }\n            }\n          });\n\n          _this._dailyPie.update();\n\n          _this._yearlyPie.update();\n        });\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    })();\n  } // ngAfterViewInit(): void {}\n\n\n  isAuthenticated() {\n    return this.userService.isAuthenticated();\n  }\n\n  getLogedUsername() {\n    return this.userService.getCurrentUser().username;\n  }\n\n  logout() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      (yield _this2.userService.logout()).subscribe();\n    })();\n  }\n\n  getSelectedPlant() {\n    return this.plantService.getSelectedPlant();\n  }\n\n  goHome() {\n    this.plantService.setSelectedPlant(null);\n    localStorage.removeItem(\"selectedPlant\");\n  }\n\n  toggleSideNav() {\n    this._toggled = !this._toggled;\n\n    if (this._toggled) {\n      this.randerer.removeClass(this.document.body, 'sb-sidenav-toggled');\n      this.randerer.addClass(this.document.body, 'sb-nav-fixed');\n    } else {\n      this.randerer.removeClass(this.document.body, 'sb-nav-fixed');\n      this.randerer.addClass(this.document.body, 'sb-sidenav-toggled');\n    }\n  }\n\n  daysInMonth(month, year) {\n    return new Date(year, month, 0).getDate();\n  } // public noLoginRoute(){\n  //   return this.router.url != \"/login\" \n  // }\n  // public noRegisterRoute(){\n  //   return this.router.url\n  // }\n  // call this event handler before browser refresh\n  // @HostListener(\"window:unload\", [\"$event\"]) unloadHandler(event: Event) {\n  //   console.log('Apelat')\n  //   this.energyService.getEnergies().forEach(\n  //     e => console.log(e)\n  //   )\n  // }\n\n\n  getDailyEnergy() {\n    let energy = 0;\n\n    this._dailyEnergy.forEach(e => energy += e);\n\n    return energy;\n  }\n\n  getYearlyEnergy() {\n    let energy = 0;\n\n    this._yearlyEnergy.forEach(e => energy += e);\n\n    return energy / 1000;\n  }\n\n}\n\nAppComponent.ɵfac = function AppComponent_Factory(t) {\n  return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.AuthenticationService), i0.ɵɵdirectiveInject(i2.PlantService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i4.DatePipe), i0.ɵɵdirectiveInject(DOCUMENT));\n};\n\nAppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AppComponent,\n  selectors: [[\"app-root\"]],\n  decls: 37,\n  vars: 9,\n  consts: [[1, \"sb-topnav\", \"navbar\", \"navbar-expand\", \"navbar-dark\", \"bg-dark\"], [1, \"navbar-brand\", \"ps-3\"], [\"id\", \"sidebarToggle\", 1, \"btn\", \"btn-link\", \"btn-sm\", \"order-1\", \"order-lg-0\", \"me-4\", \"me-lg-0\", 3, \"click\"], [1, \"fas\", \"fa-bars\"], [1, \"d-none\", \"d-md-inline-block\", \"form-inline\", \"ms-auto\", \"me-0\", \"me-md-3\", \"my-2\", \"my-md-0\"], [1, \"input-group\"], [\"type\", \"text\", \"placeholder\", \"Search for...\", \"aria-label\", \"Search for...\", \"aria-describedby\", \"btnNavbarSearch\", 1, \"form-control\"], [\"id\", \"btnNavbarSearch\", \"type\", \"button\", 1, \"btn\", \"btn-primary\"], [1, \"fas\", \"fa-search\"], [1, \"navbar-nav\", \"ms-auto\", \"ms-md-0\", \"me-3\", \"me-lg-4\"], [\"class\", \"nav-item dropdown\", 4, \"ngIf\"], [4, \"ngIf\"], [\"id\", \"layoutSidenav\"], [\"id\", \"layoutSidenav_nav\"], [\"id\", \"sidenavAccordion\", 1, \"sb-sidenav\", \"accordion\", \"sb-sidenav-dark\"], [1, \"sb-sidenav-menu\"], [\"class\", \"nav\", 4, \"ngIf\"], [1, \"sb-sidenav-footer\"], [3, \"ngIf\"], [\"id\", \"layoutSidenav_content\"], [1, \"container-fluid\", \"px-4\"], [1, \"mt-4\"], [1, \"breadcrumb\", \"mb-4\"], [\"class\", \"breadcrumb-item active\", 4, \"ngIf\"], [\"class\", \"card border-danger mb-3\", \"style\", \"max-width: 18rem;\", 4, \"ngIf\"], [1, \"py-4\", \"bg-light\", \"mt-auto\"], [1, \"d-flex\", \"align-items-center\", \"justify-content-between\", \"small\"], [1, \"text-muted\"], [1, \"nav-item\", \"dropdown\"], [\"id\", \"navbarDropdown\", \"href\", \"#\", \"role\", \"button\", \"data-bs-toggle\", \"dropdown\", \"aria-expanded\", \"false\", 1, \"nav-link\", \"dropdown-toggle\"], [1, \"fas\", \"fa-user\", \"fa-fw\"], [\"aria-labelledby\", \"navbarDropdown\", 1, \"dropdown-menu\", \"dropdown-menu-end\"], [1, \"dropdown-item\"], [1, \"dropdown-divider\"], [1, \"dropdown-item\", 3, \"click\"], [\"routerLink\", \"/login\", \"routerLinkActive\", \"active\", 1, \"nav\", \"nav-link\"], [1, \"nav\"], [1, \"sb-sidenav-menu-heading\"], [\"routerLink\", \"\", 1, \"nav-link\", 3, \"click\"], [1, \"sb-nav-link-icon\"], [1, \"fas\", \"fa-tachometer-alt\"], [1, \"small\"], [1, \"breadcrumb-item\", \"active\"], [1, \"card\", \"border-danger\", \"mb-3\", 2, \"max-width\", \"18rem\"], [1, \"card-header\", \"bg-transparent\", \"border-danger\"], [1, \"card-body\", \"text-danger\"], [1, \"card-title\"], [1, \"card-text\"], [1, \"card-footer\", \"bg-transparent\", \"border-danger\"], [\"routerLink\", \"/login\", \"routerLinkActive\", \"active\", 1, \"btn\", \"btn-primary\"], [1, \"row\"], [1, \"col-lg-6\"], [1, \"card\", \"mb-4\"], [1, \"card-header\"], [1, \"fas\", \"fa-chart-pie\", \"me-1\"], [1, \"card-body\"], [\"id\", \"myDaily\", \"width\", \"90%\", \"height\", \"35\"], [\"id\", \"myYearly\", \"width\", \"90%\", \"height\", \"35\"], [1, \"label-text\"]],\n  template: function AppComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"nav\", 0)(1, \"a\", 1);\n      i0.ɵɵtext(2, \"My virtual power plant\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"button\", 2);\n      i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_3_listener() {\n        return ctx.toggleSideNav();\n      });\n      i0.ɵɵelement(4, \"i\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"form\", 4)(6, \"div\", 5);\n      i0.ɵɵelement(7, \"input\", 6);\n      i0.ɵɵelementStart(8, \"button\", 7);\n      i0.ɵɵelement(9, \"i\", 8);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(10, \"ul\", 9);\n      i0.ɵɵtemplate(11, AppComponent_li_11_Template, 15, 0, \"li\", 10);\n      i0.ɵɵtemplate(12, AppComponent_li_12_Template, 3, 0, \"li\", 11);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(13, \"div\", 12)(14, \"div\", 13)(15, \"nav\", 14)(16, \"div\", 15);\n      i0.ɵɵtemplate(17, AppComponent_div_17_Template, 7, 0, \"div\", 16);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"div\", 17);\n      i0.ɵɵtemplate(19, AppComponent_ng_template_19_Template, 3, 1, \"ng-template\", 18);\n      i0.ɵɵtemplate(20, AppComponent_ng_template_20_Template, 3, 0, \"ng-template\", 18);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(21, \"div\", 19)(22, \"main\")(23, \"div\", 20)(24, \"h1\", 21);\n      i0.ɵɵtext(25, \"Dashboard\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"ol\", 22);\n      i0.ɵɵtemplate(27, AppComponent_li_27_Template, 2, 0, \"li\", 23);\n      i0.ɵɵtemplate(28, AppComponent_li_28_Template, 2, 1, \"li\", 23);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(29, AppComponent_div_29_Template, 12, 0, \"div\", 24);\n      i0.ɵɵtemplate(30, AppComponent_div_30_Template, 3, 2, \"div\", 11);\n      i0.ɵɵelement(31, \"router-outlet\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(32, \"footer\", 25)(33, \"div\", 20)(34, \"div\", 26)(35, \"div\", 27);\n      i0.ɵɵtext(36, \"Copyright \\u00A9 Bumbeneci Constantin Bogdan - Diploma 2022\");\n      i0.ɵɵelementEnd()()()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"ngIf\", ctx.isAuthenticated());\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isAuthenticated());\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.isAuthenticated());\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.isAuthenticated());\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isAuthenticated());\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", ctx.getSelectedPlant() == null);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.getSelectedPlant() != null);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isAuthenticated());\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isAuthenticated());\n    }\n  },\n  directives: [i5.ɵNgNoValidate, i5.NgControlStatusGroup, i5.NgForm, i4.NgIf, i3.RouterLinkWithHref, i3.RouterLinkActive, i6.PlantsGroupComponent, i7.PlantSelectedComponent, i3.RouterOutlet],\n  styles: [\".label-text[_ngcontent-%COMP%] {\\n    position: absolute; \\n    margin:  auto;\\n    top: 0px; \\n    left: 0px; \\n    width: 100%; \\n    height: 100%; \\n    z-index: 5;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    pointer-events: none;\\n    font-size: 1.5rem;\\n    padding-top: 6.5rem;\\n  }\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksa0JBQWtCO0lBQ2xCLGFBQWE7SUFDYixRQUFRO0lBQ1IsU0FBUztJQUNULFdBQVc7SUFDWCxZQUFZO0lBQ1osVUFBVTtJQUNWLGFBQWE7SUFDYix1QkFBdUI7SUFDdkIsbUJBQW1CO0lBQ25CLG9CQUFvQjtJQUNwQixpQkFBaUI7SUFDakIsbUJBQW1CO0VBQ3JCIiwiZmlsZSI6ImFwcC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmxhYmVsLXRleHQge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsgXG4gICAgbWFyZ2luOiAgYXV0bztcbiAgICB0b3A6IDBweDsgXG4gICAgbGVmdDogMHB4OyBcbiAgICB3aWR0aDogMTAwJTsgXG4gICAgaGVpZ2h0OiAxMDAlOyBcbiAgICB6LWluZGV4OiA1O1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICBmb250LXNpemU6IDEuNXJlbTtcbiAgICBwYWRkaW5nLXRvcDogNi41cmVtO1xuICB9Il19 */\"]\n});","map":{"version":3,"sources":["/Users/constantin-bogdanbumbeneci/Desktop/Licenta/Diploma/Proiect/frontend/src/app/app.component.ts"],"names":["DOCUMENT","Energy","ArcElement","BarController","BarElement","CategoryScale","Chart","Decimation","Filler","Legend","LinearScale","LineController","LineElement","PieController","PointElement","Title","Tooltip","ChartDataLabels","ChartModule","i0","i1","i2","i3","i4","i5","i6","i7","AppComponent_li_11_Template","rf","ctx","_r10","ɵɵgetCurrentView","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵtext","ɵɵlistener","AppComponent_li_11_Template_a_click_13_listener","ɵɵrestoreView","ctx_r9","ɵɵnextContext","logout","AppComponent_li_12_Template","AppComponent_div_17_Template","_r12","AppComponent_div_17_Template_a_click_3_listener","ctx_r11","goHome","AppComponent_ng_template_19_Template","ctx_r3","ɵɵadvance","ɵɵtextInterpolate1","getLogedUsername","AppComponent_ng_template_20_Template","AppComponent_li_27_Template","AppComponent_li_28_Template","ctx_r6","getSelectedPlant","name","AppComponent_div_29_Template","AppComponent_div_30_div_1_Template","ctx_r13","getYearlyEnergy","toPrecision","AppComponent_div_30_div_2_Template","AppComponent_div_30_Template","ɵɵtemplate","ctx_r8","ɵɵproperty","AppComponent","constructor","userService","plantService","router","randerer","datePipe","document","title","_toggled","_dailyEnergy","Array","_yearlyEnergy","_contribution","register","ngAfterViewInit","ngOnInit","getPlants","forEach","next","_plants","p","getEnergies","push","i","length","fetchPlantDatasBetweenDates","ps","status","s","thisYearEnergy","transform","dateTime","voltage","current","powerFactor","thisYearTotalEnergy","filter","Date","todayCurrent","todayVoltage","todayPowerFactor","todayHours","substring","todayPower","todayEnergy","j","daysInMonth","plant","console","log","_dailyPie","type","data","labels","datasets","label","backgroundColor","plugins","options","display","text","datalabels","color","font","size","formatter","value","context","_yearlyPie","update","isAuthenticated","getCurrentUser","username","subscribe","setSelectedPlant","localStorage","removeItem","toggleSideNav","removeClass","body","addClass","month","year","getDate","getDailyEnergy","energy","e","ɵfac","AppComponent_Factory","t","ɵɵdirectiveInject","AuthenticationService","PlantService","Router","Renderer2","DatePipe","ɵcmp","ɵɵdefineComponent","selectors","decls","vars","consts","template","AppComponent_Template","AppComponent_Template_button_click_3_listener","directives","ɵNgNoValidate","NgControlStatusGroup","NgForm","NgIf","RouterLinkWithHref","RouterLinkActive","PlantsGroupComponent","PlantSelectedComponent","RouterOutlet","styles"],"mappings":"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","sourcesContent":["import { DOCUMENT } from \"@angular/common\";\nimport { Energy } from './Entity/energy';\nimport { ArcElement, BarController, BarElement, CategoryScale, Chart, Decimation, Filler, Legend, LinearScale, LineController, LineElement, PieController, PointElement, Title, Tooltip } from 'chart.js';\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\nimport ChartModule from 'chartjs-plugin-datalabels';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./Service/authentication.service\";\nimport * as i2 from \"./Service/plant.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"./Components/plants-group/plants-group.component\";\nimport * as i7 from \"./Components/plant-selected/plant-selected.component\";\nfunction AppComponent_li_11_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 28)(1, \"a\", 29);\n    i0.ɵɵelement(2, \"i\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ul\", 31)(4, \"li\")(5, \"a\", 32);\n    i0.ɵɵtext(6, \"Settings\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"li\")(8, \"a\", 32);\n    i0.ɵɵtext(9, \"Activity Log\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"li\");\n    i0.ɵɵelement(11, \"hr\", 33);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"li\")(13, \"a\", 34);\n    i0.ɵɵlistener(\"click\", function AppComponent_li_11_Template_a_click_13_listener() { i0.ɵɵrestoreView(_r10); const ctx_r9 = i0.ɵɵnextContext(); return ctx_r9.logout(); });\n    i0.ɵɵtext(14, \"Logout\");\n    i0.ɵɵelementEnd()()()();\n} }\nfunction AppComponent_li_12_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 35);\n    i0.ɵɵtext(2, \"Login\");\n    i0.ɵɵelementEnd()();\n} }\nfunction AppComponent_div_17_Template(rf, ctx) { if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 36)(1, \"div\", 37);\n    i0.ɵɵtext(2, \"Core Menu\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"a\", 38);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_17_Template_a_click_3_listener() { i0.ɵɵrestoreView(_r12); const ctx_r11 = i0.ɵɵnextContext(); return ctx_r11.goHome(); });\n    i0.ɵɵelementStart(4, \"div\", 39);\n    i0.ɵɵelement(5, \"i\", 40);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \" Home \");\n    i0.ɵɵelementEnd()();\n} }\nfunction AppComponent_ng_template_19_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 41);\n    i0.ɵɵtext(1, \"Logged in as:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(2);\n} if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.getLogedUsername(), \" \");\n} }\nfunction AppComponent_ng_template_20_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 41);\n    i0.ɵɵtext(1, \"Please Log In\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(2, \" You are not authenticated \");\n} }\nfunction AppComponent_li_27_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 42);\n    i0.ɵɵtext(1, \"Dashboard\");\n    i0.ɵɵelementEnd();\n} }\nfunction AppComponent_li_28_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 42);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Dashboard >> \", ctx_r6.getSelectedPlant().name, \"\");\n} }\nfunction AppComponent_div_29_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 43)(1, \"div\", 44);\n    i0.ɵɵtext(2, \"Atention\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 45)(4, \"h5\", 46);\n    i0.ɵɵtext(5, \"You are not authenticated\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 47);\n    i0.ɵɵtext(7, \"This panel is designed to be used by authorised user.\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 48)(9, \"a\", 49);\n    i0.ɵɵtext(10, \"Take action\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \" - Please login \");\n    i0.ɵɵelementEnd()();\n} }\nfunction AppComponent_div_30_div_1_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"app-plants-group\");\n    i0.ɵɵelementStart(2, \"div\")(3, \"h1\");\n    i0.ɵɵtext(4, \"Statistics\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"br\");\n    i0.ɵɵelementStart(6, \"div\", 50)(7, \"div\", 51)(8, \"div\", 52)(9, \"div\", 53);\n    i0.ɵɵelement(10, \"i\", 54);\n    i0.ɵɵtext(11, \" Daily production \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 55);\n    i0.ɵɵelement(13, \"canvas\", 56);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(14, \"div\", 51)(15, \"div\", 52)(16, \"div\", 53);\n    i0.ɵɵelement(17, \"i\", 54);\n    i0.ɵɵtext(18, \" Yearly production \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"div\", 55);\n    i0.ɵɵelement(20, \"canvas\", 57);\n    i0.ɵɵelementStart(21, \"div\", 58);\n    i0.ɵɵtext(22, \"Total production \");\n    i0.ɵɵelement(23, \"br\");\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd()()()()()()();\n} if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(24);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r13.getYearlyEnergy().toPrecision(3) + \" GWh\", \"\");\n} }\nfunction AppComponent_div_30_div_2_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"app-plant-selected\");\n    i0.ɵɵelementEnd();\n} }\nfunction AppComponent_div_30_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, AppComponent_div_30_div_1_Template, 25, 1, \"div\", 11);\n    i0.ɵɵtemplate(2, AppComponent_div_30_div_2_Template, 2, 0, \"div\", 11);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.getSelectedPlant() == null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.getSelectedPlant() != null);\n} }\nexport class AppComponent {\n    constructor(userService, plantService, router, randerer, datePipe, document) {\n        this.userService = userService;\n        this.plantService = plantService;\n        this.router = router;\n        this.randerer = randerer;\n        this.datePipe = datePipe;\n        this.document = document;\n        this.title = 'my-virtual-power-plant-ng';\n        this._toggled = false;\n        this._dailyEnergy = new Array();\n        this._yearlyEnergy = new Array();\n        this._contribution = new Array();\n        Chart.register(BarElement, BarController, CategoryScale, Decimation, Filler, Legend, Title, Tooltip, LinearScale, LineElement, LineController, PointElement, PieController, ArcElement);\n    }\n    async ngAfterViewInit() {\n    }\n    async ngOnInit() {\n        (await this.plantService.getPlants()).forEach(async (next) => {\n            this._plants = next;\n            this._plants.forEach(p => {\n                this.plantService.getEnergies().push(new Energy());\n            });\n            for (let i = 0; i < this.plantService.getEnergies().length; i++) {\n                (await this.plantService.fetchPlantDatasBetweenDates(this._plants[i], '2022-01-01', '2022-12-31')).forEach(ps => {\n                    this.plantService.getEnergies()[i].status = ps;\n                    this.plantService.getEnergies()[i].status.forEach(//Every month Data\n                    //Every month Data\n                    s => {\n                        this.plantService.getEnergies()[i].thisYearEnergy[this.datePipe.transform(s.dateTime, 'MM') - 1] += s.voltage * s.current * s.powerFactor;\n                        this.plantService.getEnergies()[i].thisYearTotalEnergy += s.voltage * s.current * s.powerFactor;\n                    });\n                    this.plantService.getEnergies()[i].status.filter(//Today Data\n                    //Today Data\n                    s => this.datePipe.transform(s.dateTime, 'yyyy-MM-dd') == this.datePipe.transform(new Date(), 'yyyy-MM-dd'))\n                        .forEach(s => {\n                        this.plantService.getEnergies()[i].todayCurrent.push(s.current);\n                        this.plantService.getEnergies()[i].todayVoltage.push(s.voltage);\n                        this.plantService.getEnergies()[i].todayPowerFactor.push(s.powerFactor);\n                        this.plantService.getEnergies()[i].todayHours.push(this.datePipe.transform(s.dateTime, 'yyyy-MM-ddThh:mm:ss').substring(11));\n                        this.plantService.getEnergies()[i].todayPower.push(s.voltage * s.current * s.powerFactor);\n                        this.plantService.getEnergies()[i].todayEnergy += s.voltage * s.current * s.powerFactor;\n                    });\n                    for (let j = 0; j < 12; j++) {\n                        if ((j + 1) != this.daysInMonth(j + 1, this.datePipe.transform(new Date(), 'MM'))) {\n                            this.plantService.getEnergies()[i].thisYearEnergy[j] *= (this.daysInMonth(j + 1, this.datePipe.transform(new Date(), 'yyyy') - 1) / (this.daysInMonth(j + 1, this.datePipe.transform(new Date(), 'yyyy'))));\n                        }\n                        else {\n                            this.plantService.getEnergies()[i].thisYearEnergy[j] *= (this.datePipe.transform(new Date(), 'dd') - 1) / this.datePipe.transform(new Date(), 'dd');\n                        }\n                    }\n                    this.plantService.getEnergies()[i].todayEnergy *= (this.plantService.getEnergies()[i].todayHours.length - 1) / this.plantService.getEnergies()[i].todayHours.length;\n                    this.plantService.getEnergies()[i].plant = this._plants[i];\n                    this._contribution.push(this.plantService.getEnergies()[i].plant.name);\n                    this._dailyEnergy.push(this.plantService.getEnergies()[i].todayEnergy);\n                    this._yearlyEnergy.push(this.plantService.getEnergies()[i].thisYearTotalEnergy);\n                });\n            }\n            console.log(this.plantService.getEnergies());\n            this._dailyPie = new Chart(\"myDaily\", {\n                type: 'pie',\n                data: {\n                    labels: this._contribution,\n                    datasets: [{\n                            label: \"Energy Contribution\",\n                            data: this._dailyEnergy,\n                            backgroundColor: [\n                                'rgb(255, 159, 64)',\n                                'rgb(255, 205, 86)',\n                                'rgb(0, 163, 51)',\n                                'rgb(54, 162, 235)',\n                                'rgb(153, 102, 255)',\n                                'rgb(201, 203, 207)',\n                                'rgb(0,0,255)'\n                            ],\n                        }],\n                },\n                plugins: [ChartDataLabels, ChartModule],\n                options: {\n                    plugins: {\n                        title: {\n                            display: true,\n                            text: 'Daily contribution in kWh'\n                        },\n                        datalabels: {\n                            color: 'rgb(255,255,255)',\n                            font: {\n                                size: 13\n                            },\n                            formatter: function (value, context) {\n                                return value.toPrecision(7) + ' kWh';\n                            }\n                        },\n                    },\n                },\n            });\n            this._yearlyPie = new Chart(\"myYearly\", {\n                type: 'doughnut',\n                plugins: [ChartDataLabels, ChartModule],\n                data: {\n                    labels: this._contribution,\n                    datasets: [{\n                            label: \"Energy Contribution\",\n                            data: this._yearlyEnergy,\n                            backgroundColor: [\n                                'rgb(0,0,255)',\n                                'rgb(255, 159, 64)',\n                                'rgb(255, 205, 86)',\n                                'rgb(153, 102, 255)',\n                                'rgb(0, 163, 51)',\n                                'rgb(201, 203, 207)',\n                                'rgb(54, 162, 235)',\n                            ],\n                        }],\n                },\n                options: {\n                    plugins: {\n                        title: {\n                            display: true,\n                            text: 'Yearly contribution in MWh'\n                        },\n                        datalabels: {\n                            color: 'rgb(255,255,255)',\n                            font: {\n                                size: 13\n                            },\n                            formatter: function (value, context) {\n                                return value.toPrecision(6) + ' MWh';\n                            }\n                        }\n                    },\n                },\n            });\n            this._dailyPie.update();\n            this._yearlyPie.update();\n        });\n    }\n    // ngAfterViewInit(): void {}\n    isAuthenticated() {\n        return this.userService.isAuthenticated();\n    }\n    getLogedUsername() {\n        return this.userService.getCurrentUser().username;\n    }\n    async logout() {\n        (await this.userService.logout()).subscribe();\n    }\n    getSelectedPlant() {\n        return this.plantService.getSelectedPlant();\n    }\n    goHome() {\n        this.plantService.setSelectedPlant(null);\n        localStorage.removeItem(\"selectedPlant\");\n    }\n    toggleSideNav() {\n        this._toggled = !this._toggled;\n        if (this._toggled) {\n            this.randerer.removeClass(this.document.body, 'sb-sidenav-toggled');\n            this.randerer.addClass(this.document.body, 'sb-nav-fixed');\n        }\n        else {\n            this.randerer.removeClass(this.document.body, 'sb-nav-fixed');\n            this.randerer.addClass(this.document.body, 'sb-sidenav-toggled');\n        }\n    }\n    daysInMonth(month, year) {\n        return new Date(year, month, 0).getDate();\n    }\n    // public noLoginRoute(){\n    //   return this.router.url != \"/login\" \n    // }\n    // public noRegisterRoute(){\n    //   return this.router.url\n    // }\n    // call this event handler before browser refresh\n    // @HostListener(\"window:unload\", [\"$event\"]) unloadHandler(event: Event) {\n    //   console.log('Apelat')\n    //   this.energyService.getEnergies().forEach(\n    //     e => console.log(e)\n    //   )\n    // }\n    getDailyEnergy() {\n        let energy = 0;\n        this._dailyEnergy.forEach(e => energy += e);\n        return energy;\n    }\n    getYearlyEnergy() {\n        let energy = 0;\n        this._yearlyEnergy.forEach(e => energy += e);\n        return energy / 1000;\n    }\n}\nAppComponent.ɵfac = function AppComponent_Factory(t) { return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.AuthenticationService), i0.ɵɵdirectiveInject(i2.PlantService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i4.DatePipe), i0.ɵɵdirectiveInject(DOCUMENT)); };\nAppComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: AppComponent, selectors: [[\"app-root\"]], decls: 37, vars: 9, consts: [[1, \"sb-topnav\", \"navbar\", \"navbar-expand\", \"navbar-dark\", \"bg-dark\"], [1, \"navbar-brand\", \"ps-3\"], [\"id\", \"sidebarToggle\", 1, \"btn\", \"btn-link\", \"btn-sm\", \"order-1\", \"order-lg-0\", \"me-4\", \"me-lg-0\", 3, \"click\"], [1, \"fas\", \"fa-bars\"], [1, \"d-none\", \"d-md-inline-block\", \"form-inline\", \"ms-auto\", \"me-0\", \"me-md-3\", \"my-2\", \"my-md-0\"], [1, \"input-group\"], [\"type\", \"text\", \"placeholder\", \"Search for...\", \"aria-label\", \"Search for...\", \"aria-describedby\", \"btnNavbarSearch\", 1, \"form-control\"], [\"id\", \"btnNavbarSearch\", \"type\", \"button\", 1, \"btn\", \"btn-primary\"], [1, \"fas\", \"fa-search\"], [1, \"navbar-nav\", \"ms-auto\", \"ms-md-0\", \"me-3\", \"me-lg-4\"], [\"class\", \"nav-item dropdown\", 4, \"ngIf\"], [4, \"ngIf\"], [\"id\", \"layoutSidenav\"], [\"id\", \"layoutSidenav_nav\"], [\"id\", \"sidenavAccordion\", 1, \"sb-sidenav\", \"accordion\", \"sb-sidenav-dark\"], [1, \"sb-sidenav-menu\"], [\"class\", \"nav\", 4, \"ngIf\"], [1, \"sb-sidenav-footer\"], [3, \"ngIf\"], [\"id\", \"layoutSidenav_content\"], [1, \"container-fluid\", \"px-4\"], [1, \"mt-4\"], [1, \"breadcrumb\", \"mb-4\"], [\"class\", \"breadcrumb-item active\", 4, \"ngIf\"], [\"class\", \"card border-danger mb-3\", \"style\", \"max-width: 18rem;\", 4, \"ngIf\"], [1, \"py-4\", \"bg-light\", \"mt-auto\"], [1, \"d-flex\", \"align-items-center\", \"justify-content-between\", \"small\"], [1, \"text-muted\"], [1, \"nav-item\", \"dropdown\"], [\"id\", \"navbarDropdown\", \"href\", \"#\", \"role\", \"button\", \"data-bs-toggle\", \"dropdown\", \"aria-expanded\", \"false\", 1, \"nav-link\", \"dropdown-toggle\"], [1, \"fas\", \"fa-user\", \"fa-fw\"], [\"aria-labelledby\", \"navbarDropdown\", 1, \"dropdown-menu\", \"dropdown-menu-end\"], [1, \"dropdown-item\"], [1, \"dropdown-divider\"], [1, \"dropdown-item\", 3, \"click\"], [\"routerLink\", \"/login\", \"routerLinkActive\", \"active\", 1, \"nav\", \"nav-link\"], [1, \"nav\"], [1, \"sb-sidenav-menu-heading\"], [\"routerLink\", \"\", 1, \"nav-link\", 3, \"click\"], [1, \"sb-nav-link-icon\"], [1, \"fas\", \"fa-tachometer-alt\"], [1, \"small\"], [1, \"breadcrumb-item\", \"active\"], [1, \"card\", \"border-danger\", \"mb-3\", 2, \"max-width\", \"18rem\"], [1, \"card-header\", \"bg-transparent\", \"border-danger\"], [1, \"card-body\", \"text-danger\"], [1, \"card-title\"], [1, \"card-text\"], [1, \"card-footer\", \"bg-transparent\", \"border-danger\"], [\"routerLink\", \"/login\", \"routerLinkActive\", \"active\", 1, \"btn\", \"btn-primary\"], [1, \"row\"], [1, \"col-lg-6\"], [1, \"card\", \"mb-4\"], [1, \"card-header\"], [1, \"fas\", \"fa-chart-pie\", \"me-1\"], [1, \"card-body\"], [\"id\", \"myDaily\", \"width\", \"90%\", \"height\", \"35\"], [\"id\", \"myYearly\", \"width\", \"90%\", \"height\", \"35\"], [1, \"label-text\"]], template: function AppComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelementStart(0, \"nav\", 0)(1, \"a\", 1);\n        i0.ɵɵtext(2, \"My virtual power plant\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"button\", 2);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_3_listener() { return ctx.toggleSideNav(); });\n        i0.ɵɵelement(4, \"i\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"form\", 4)(6, \"div\", 5);\n        i0.ɵɵelement(7, \"input\", 6);\n        i0.ɵɵelementStart(8, \"button\", 7);\n        i0.ɵɵelement(9, \"i\", 8);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(10, \"ul\", 9);\n        i0.ɵɵtemplate(11, AppComponent_li_11_Template, 15, 0, \"li\", 10);\n        i0.ɵɵtemplate(12, AppComponent_li_12_Template, 3, 0, \"li\", 11);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(13, \"div\", 12)(14, \"div\", 13)(15, \"nav\", 14)(16, \"div\", 15);\n        i0.ɵɵtemplate(17, AppComponent_div_17_Template, 7, 0, \"div\", 16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"div\", 17);\n        i0.ɵɵtemplate(19, AppComponent_ng_template_19_Template, 3, 1, \"ng-template\", 18);\n        i0.ɵɵtemplate(20, AppComponent_ng_template_20_Template, 3, 0, \"ng-template\", 18);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(21, \"div\", 19)(22, \"main\")(23, \"div\", 20)(24, \"h1\", 21);\n        i0.ɵɵtext(25, \"Dashboard\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"ol\", 22);\n        i0.ɵɵtemplate(27, AppComponent_li_27_Template, 2, 0, \"li\", 23);\n        i0.ɵɵtemplate(28, AppComponent_li_28_Template, 2, 1, \"li\", 23);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(29, AppComponent_div_29_Template, 12, 0, \"div\", 24);\n        i0.ɵɵtemplate(30, AppComponent_div_30_Template, 3, 2, \"div\", 11);\n        i0.ɵɵelement(31, \"router-outlet\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(32, \"footer\", 25)(33, \"div\", 20)(34, \"div\", 26)(35, \"div\", 27);\n        i0.ɵɵtext(36, \"Copyright \\u00A9 Bumbeneci Constantin Bogdan - Diploma 2022\");\n        i0.ɵɵelementEnd()()()()()();\n    } if (rf & 2) {\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngIf\", ctx.isAuthenticated());\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isAuthenticated());\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.isAuthenticated());\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.isAuthenticated());\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isAuthenticated());\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngIf\", ctx.getSelectedPlant() == null);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.getSelectedPlant() != null);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isAuthenticated());\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isAuthenticated());\n    } }, directives: [i5.ɵNgNoValidate, i5.NgControlStatusGroup, i5.NgForm, i4.NgIf, i3.RouterLinkWithHref, i3.RouterLinkActive, i6.PlantsGroupComponent, i7.PlantSelectedComponent, i3.RouterOutlet], styles: [\".label-text[_ngcontent-%COMP%] {\\n    position: absolute; \\n    margin:  auto;\\n    top: 0px; \\n    left: 0px; \\n    width: 100%; \\n    height: 100%; \\n    z-index: 5;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    pointer-events: none;\\n    font-size: 1.5rem;\\n    padding-top: 6.5rem;\\n  }\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksa0JBQWtCO0lBQ2xCLGFBQWE7SUFDYixRQUFRO0lBQ1IsU0FBUztJQUNULFdBQVc7SUFDWCxZQUFZO0lBQ1osVUFBVTtJQUNWLGFBQWE7SUFDYix1QkFBdUI7SUFDdkIsbUJBQW1CO0lBQ25CLG9CQUFvQjtJQUNwQixpQkFBaUI7SUFDakIsbUJBQW1CO0VBQ3JCIiwiZmlsZSI6ImFwcC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmxhYmVsLXRleHQge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsgXG4gICAgbWFyZ2luOiAgYXV0bztcbiAgICB0b3A6IDBweDsgXG4gICAgbGVmdDogMHB4OyBcbiAgICB3aWR0aDogMTAwJTsgXG4gICAgaGVpZ2h0OiAxMDAlOyBcbiAgICB6LWluZGV4OiA1O1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICBmb250LXNpemU6IDEuNXJlbTtcbiAgICBwYWRkaW5nLXRvcDogNi41cmVtO1xuICB9Il19 */\"] });\n"]},"metadata":{},"sourceType":"module"}